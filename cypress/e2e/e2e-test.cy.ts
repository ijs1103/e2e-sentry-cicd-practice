describe('ì˜í™” ê²€ìƒ‰ ì•± E2E í…ŒìŠ¤íŠ¸', () => {
  // â­ï¸ ê° í…ŒìŠ¤íŠ¸('it')ê°€ ì‹¤í–‰ë˜ê¸° ì „ì— í•­ìƒ baseUrlì„ ë°©ë¬¸í•©ë‹ˆë‹¤.
  beforeEach(() => {
    cy.visit('/')
  })

  /**
   * ì‹œë‚˜ë¦¬ì˜¤ 1: í•´ë‹¹ í˜ì´ì§€ ì˜ ë°©ë¬¸ì´ ë˜ëŠ”ì§€ í™•ì¸
   */
  it('ë©”ì¸ í˜ì´ì§€ì— ì ‘ì†í–ˆì„ ë•Œ íƒ€ì´í‹€ì´ ë³´ì—¬ì•¼ í•©ë‹ˆë‹¤.', () => {
    // h1 íƒœê·¸ì— 'OMDb API' ê°™ì€ í…ìŠ¤íŠ¸ê°€ ìˆëŠ”ì§€ í™•ì¸
    cy.get('h1').contains('OMDb API')
  })

  /**
   * ì‹œë‚˜ë¦¬ì˜¤ 2: ìƒ˜í”Œë¬´ë¹„ ë²„íŠ¼ í´ë¦­í•˜ë©´ frozen2 ì˜í™” ë°ì´í„°ê°€ ì˜ëœ¨ëŠ”ì§€ í™•ì¸
   */
  it("ìƒ˜í”Œë¬´ë¹„ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ 'Frozen II' ë°ì´í„°ê°€ ë¡œë“œë˜ì–´ì•¼ í•©ë‹ˆë‹¤.", () => {
    cy.contains('ğŸ“½ï¸ Sample Movie').click()
    // 'Frozen II' í…ìŠ¤íŠ¸ê°€ í¬í•¨ëœ ìš”ì†Œê°€ í™”ë©´ì— ë³´ì´ëŠ”ì§€ í™•ì¸
    cy.get('h1').contains('Frozen II')
  })

  /**
   * ì‹œë‚˜ë¦¬ì˜¤ 3: ê²€ìƒ‰ í‚¤ì›Œë“œë¡œ star wars ê²€ìƒ‰ì‹œ ì˜í™” ë°ì´í„° 10ê±´ì´ ì˜ëœ¨ëŠ”ì§€ í™•ì¸
   */
  it("'star wars' ê²€ìƒ‰ ì‹œ 10ê°œì˜ ì˜í™” ê²°ê³¼ê°€ ë³´ì—¬ì•¼ í•©ë‹ˆë‹¤.", () => {
    // 1. data-testid="input-text"ì¸ input ìš”ì†Œë¥¼ ì°¾ì•„ 'star wars'ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.
    cy.get('[data-testid="input-text"]').type('star wars')

    // 2. data-testid="button-search"ì¸ button ìš”ì†Œë¥¼ ì°¾ì•„ í´ë¦­í•©ë‹ˆë‹¤.
    cy.get('[data-testid="button-search"]').click()

    // 3. 'group' í´ë˜ìŠ¤ë¥¼ ê°€ì§„ 'li' ìš”ì†Œë¥¼ ì°¾ìŠµë‹ˆë‹¤.
    //    ì´ ìš”ì†Œê°€ ì •í™•íˆ 10ê°œì¸ì§€ í™•ì¸í•©ë‹ˆë‹¤.
    cy.get('li.group').should('have.length', 10)
  })

  /**
   * ì‹œë‚˜ë¦¬ì˜¤ 4: ê²€ìƒ‰í•œ ì˜í™” í¬ìŠ¤í„°ë¥¼ í´ë¦­í–ˆì„ë•Œ ìƒì„¸í˜ì´ì§€ê°€ ì˜ëœ¨ëŠ”ì§€ í™•ì¸
   */
  it('ê²€ìƒ‰ëœ ì˜í™” í¬ìŠ¤í„° í´ë¦­ ì‹œ ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™í•´ì•¼ í•©ë‹ˆë‹¤.', () => {
    // [ì¤€ë¹„] 'star wars'ë¥¼ ê²€ìƒ‰ (ì‹œë‚˜ë¦¬ì˜¤ 3ê³¼ ë™ì¼)
    cy.get('[data-testid="input-text"]').type('star wars')
    cy.get('[data-testid="button-search"]').click()
    cy.get('li.group').should('have.length', 10)

    // [ì‹¤í–‰]
    // 'li.group' í´ë˜ìŠ¤ë¥¼ ê°€ì§„ ì²« ë²ˆì§¸ ìš”ì†Œë¥¼ ì°¾ê³ ,
    // ê·¸ ì•ˆì˜ 'a'íƒœê·¸(í¬ìŠ¤í„°ì™€ í…ìŠ¤íŠ¸ë¥¼ ê°ì‹¸ëŠ” ë§í¬)ë¥¼ í´ë¦­í•©ë‹ˆë‹¤.
    cy.get('li.group').first().find('a').click()

    // [ê²€ì¦]
    // 1. í˜ì´ì§€ URLì´ '/movies/' (ìƒì„¸ í˜ì´ì§€)ë¥¼ í¬í•¨í•˜ëŠ”ì§€ í™•ì¸
    // (HTMLì—ì„œ hrefê°€ "/movies/tt..."ë¡œ ì‹œì‘í•˜ëŠ” ê²ƒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤)
    cy.url().should('include', '/movies/')

    // 2. ìƒì„¸ í˜ì´ì§€ê°€ ì˜ ë¡œë“œë˜ì—ˆëŠ”ì§€ í™•ì¸
    // (ìƒì„¸ í˜ì´ì§€ì—ëŠ” ì˜í™” ì œëª©ì„ h1 íƒœê·¸ë¡œ ë³´ì—¬ì¤Œ)
    // (ì œëª©ì—ëŠ” 'Star Wars'ë¥¼ í¬í•¨í•˜ê³  ìˆì„ ê²ë‹ˆë‹¤.)
    cy.get('h1').should('contain.text', 'Star Wars')
  })

  /**
   * ì‹œë‚˜ë¦¬ì˜¤ 5: reset ë²„íŠ¼ ëˆŒë €ì„ë•Œ ë°ì´í„°ê°€ ì´ˆê¸°í™”ë˜ëŠ”ì§€ í™•ì¸
   */
  it('Reset ë²„íŠ¼ í´ë¦­ ì‹œ ê²€ìƒ‰ì°½ê³¼ ê²°ê³¼ í™”ë©´ì´ ì´ˆê¸°í™”ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.', () => {
    // [ì¤€ë¹„] 'star wars'ë¥¼ ê²€ìƒ‰ (ì‹œë‚˜ë¦¬ì˜¤ 3ê³¼ ë™ì¼)
    cy.get('[data-testid="input-text"]').type('star wars')
    cy.get('[data-testid="button-search"]').click()
    cy.get('li.group').should('have.length', 10)

    // [ì‹¤í–‰]
    // data-testid="button-reset"ì¸ button ìš”ì†Œë¥¼ ì°¾ì•„ í´ë¦­í•©ë‹ˆë‹¤.
    cy.get('[data-testid="button-reset"]').click()

    // [ê²€ì¦]
    // 1. ê²€ìƒ‰ì°½ì´ ë¹„ì›Œì¡ŒëŠ”ì§€ í™•ì¸
    cy.get('[data-testid="input-text"]').should('have.value', '')

    // 2. ì˜í™” ëª©ë¡ì´ ì‚¬ë¼ì¡ŒëŠ”ì§€ í™•ì¸
    // (ê°€ì •: 'Search for the movie title!' í…ìŠ¤íŠ¸ê°€ ë³´ì—¬ì§€ë©´ ì´ˆê¸°ìƒíƒœ)
    cy.contains('p', 'Search for the movie title!')
  })
})
